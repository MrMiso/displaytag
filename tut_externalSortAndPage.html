<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.9.2 from src\site\markdown/tut_externalSortAndPage.md at 07-09-2021 05:35
 | Rendered using Apache Maven Fluido Skin 1.9
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.9.2" />
    <title>Display tag library &#x2013; External Paging and Sorting</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.9.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-1.9.min.js"></script>
<link href="../css/site.css" rel="stylesheet" />
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <header>
        <div id="banner">
          <div class="pull-left"><a href="http://www.displaytag.org" id="bannerLeft"><h2><span class="color-highlight">displaytag</span></h2>
</a></div>
          <div class="pull-right"></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
      <li class="pull-right"><span class="divider">|</span>
<a href="http://demo.displaytag.org/displaytag-examples-2.0" class="externalLink" title="Live examples">Live examples</a></li>
      <li class="pull-right"><a href="http://www.displaytag.org/20/download.html" class="externalLink" title="Download">Download</a></li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span2">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Reference</li>
    <li><a href="index.html" title="About"><span class="none"></span>About</a></li>
    <li><a href="install.html" title="Install"><span class="none"></span>Install</a></li>
    <li><a href="tlds.html" title="Tlds"><span class="none"></span>Tlds</a></li>
    <li><a href="displaytag/tagreference.html" title="Tag reference"><span class="none"></span>Tag reference</a></li>
    <li><a href="configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li><a href="export_filter.html" title="Export filter"><span class="none"></span>Export filter</a></li>
    <li><a href="migrating.html" title="Migrating from 1.x"><span class="none"></span>Migrating from 1.x</a></li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="portlet.html" title="Jsr-168 Portlet support"><span class="none"></span>Jsr-168 Portlet support</a></li>
   <li class="nav-header">Tutorial</li>
    <li><a href="tut_basic.html" title="Basic usage"><span class="none"></span>Basic usage</a></li>
    <li><a href="tut_implicitobjects.html" title="Implicit objects"><span class="none"></span>Implicit objects</a></li>
    <li><a href="tut_sources.html" title="Data sources"><span class="none"></span>Data sources</a></li>
    <li><a href="tut_decorators.html" title="Decorators"><span class="none"></span>Decorators</a></li>
    <li><a href="tut_links.html" title="Links"><span class="none"></span>Links</a></li>
    <li><a href="tut_style.html" title="Style"><span class="none"></span>Style</a></li>
    <li><a href="export.html" title="Export"><span class="none"></span>Export</a></li>
    <li><a href="i18n.html" title="I18n"><span class="none"></span>I18n</a></li>
    <li class="active"><a href="#"><span class="none"></span>External paging/sorting</a></li>
   <li class="nav-header">Project Info</li>
    <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="issue-tracking.html" title="Issue Tracking"><span class="none"></span>Issue Tracking</a></li>
    <li><a href="mail-lists.html" title="Mailing Lists"><span class="none"></span>Mailing Lists</a></li>
    <li><a href="license.html" title="Project License"><span class="none"></span>Project License</a></li>
    <li><a href="team-list.html" title="Project Team"><span class="none"></span>Project Team</a></li>
    <li><a href="source-repository.html" title="Source Repository"><span class="none"></span>Source Repository</a></li>
   <li class="nav-header">Developers</li>
    <li><a href="coding_conventions.html" title="Coding Conventions"><span class="none"></span>Coding Conventions</a></li>
    <li><a href="source-repository.html" title="Source repository"><span class="none"></span>Source repository</a></li>
   <li class="nav-header">Project Reports</li>
    <li><a href="displaytag/tagreference.html" title="Tag reference"><span class="none"></span>Tag reference</a></li>
    <li><a href="displaytag/tlddoc/index.html" title="Taglibdoc documentation"><span class="none"></span>Taglibdoc documentation</a></li>
    <li><a href="changes-report.html" title="Changes Report"><span class="none"></span>Changes Report</a></li>
    <li><a href="displaytag/dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="displaytag/apidocs/index.html" title="Javadoc"><span class="none"></span>Javadoc</a></li>
    <li><a href="displaytag/pmd.html" title="PMD"><span class="none"></span>PMD</a></li>
    <li><a href="displaytag/clover/index.html" title="Clover"><span class="none"></span>Clover</a></li>
    <li><a href="displaytag/surefire-report.html" title="Maven Surefire Report"><span class="none"></span>Maven Surefire Report</a></li>
    <li><a href="displaytag/xref/index.html" title="Source Xref"><span class="none"></span>Source Xref</a></li>
    <li><a href="displaytag/xref-text/index.html" title="Test Xref"><span class="none"></span>Test Xref</a></li>
    <li><a href="displaytag/jdepend-report.html" title="JDepend Report"><span class="none"></span>JDepend Report</a></li>
    <li><a href="displaytag/taglibvalidation.html" title="Tag library validation"><span class="none"></span>Tag library validation</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <hr />
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
              <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn"  class="span10" >
<section>
<h2><a name="External_Paging_and_Sorting"></a>External Paging and Sorting</h2>
<p>The default behavior of displaytag is working with a full list, handling sorting and paging trasparently. Sometimes, however, you could need to give displaytag only the records displayed, handling sorting and paging by yourself (this is what we call &#x201c;partial list support&#x201d;).</p>
<p>Displaytag 1.1 offers two alternative ways for working with partial lists:</p>
<ul>

<li>the first one uses the valuelist pattern, and requires that the object that you give to displaytag implements the <code>org.displaytag.pagination.PaginatedList</code> interface. You can pass this object to displaytag as an usual list, and it will extract paging and sorting information from it. This way is more recommended if you have to build your backend layer and you can easily follow this pattern.</li>
<li>a second way, recommended if you only have to use partial list for few tables that show a performance problem using full lists, is passing all the needed parameters as separate tag attributes (recors to be shown, page number, total number of records&#x2026;)</li>
</ul><section>
<h3><a name="Using_the_Valuelist_pattern"></a>Using the Valuelist pattern</h3>
<p>If the object passed to the displaytag as a list is in fact an instance of <code>org.displaytag.pagination.PaginatedList</code> (and not a collection), displaytag will assume that the list is externally sorted and paginated. Implementing this interface is trivial, and an adapter over existing classes can easily be written. See the <code>org.displaytag.pagination.PaginatedList</code> javadocs for more details.</p>
<p>In order for the generated pagination and sort links to be &#x201c;understandable&#x201d; by the application, they are not generated the same way as for a traditional DisplayTag table. Indeed, since the table is externally sorted and paginated, the application must be able to easily get the sort and pagination parameters, without having to decode the DisplayTag encoded parameters.</p>
<p>These sort and pagination links are generated based on additional properties. These properties can be overridden using &lt;display:setProperty/&gt;, in order to be able to have different sort of page parameters in the application, or to have multiple tables in a single HTML page.</p>
<p>If the default values of these properties are used, the href of the sort links will look like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">  http://foo.bar.com/context/requestUri?sort=name&amp;dir=asc&amp;originalParameters=originalValues.
</pre></div></div>

<p>The href of the pagination links will look like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint">  http://foo.bar.com/context/requestUri?sort=name&amp;dir=asc&amp;page=5&amp;originalParameters=originalValues
</pre></div></div>
</section><section>
<h3><a name="Without_implementing_the_PaginatedList_interface"></a>Without implementing the PaginatedList interface</h3><section>
<h4><a name="External_sort"></a>External sort</h4>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;display:table name=&quot;testList&quot; sort=&quot;external&quot; defaultsort=&quot;1&quot; id=&quot;element&quot;&gt;
  &lt;display:column property=&quot;id&quot; title=&quot;ID&quot; sortable=&quot;true&quot; sortName=&quot;id&quot; /&gt;
  &lt;display:column property=&quot;firstName&quot; sortable=&quot;true&quot; sortName=&quot;firstName&quot; title=&quot;First Name&quot; /&gt;
  &lt;display:column property=&quot;lastName&quot; sortable=&quot;true&quot; sortName=&quot;lastName&quot; title=&quot;Last Name&quot; /&gt;
  &lt;display:column property=&quot;address&quot; sortable=&quot;true&quot; sortName=&quot;address&quot; title=&quot;Email Address&quot;/&gt;
&lt;/display:table&gt;
</pre></div></div>

<p>When using the <code>sort=&quot;external&quot;</code> property you are telling DisplayTag that your list is already sorted according to some specific column before the tag gets it. This is a must when used with partial lists as we will see below, however you can use it by itself. A new property named sortName has been addeed to the column tag. The purpose of this property is for convenience when writing the backend code that actually does the sorting of the data. For example the header link for the column with property id in the sample code above will render a link containing d-(encoded table id)-s=id. If you remove the sortName property from the column the link will instead contain d-(encoded table id)-s=0, which is the index of the column rather than the name. Once again it is solely for convenience.</p>
<p>The first time you access a jsp with a DisplayTag in it, there are two ways for the tag to know how your data is sorted. Firstly it will check for a request parameter d-(encoded table id)-s. If that parameter exists, and its value matches the sortName of one of the declared column tags, then when it is rendered to html it will set the matching column as being sorted. If that parameter does not exist it will examine the defaultsort property of the table tag, if it exists then it will render the corresponding column as sorted. Otherwise no column will be rendered as being sorted. So really you have two options. Set your backend to sort your data based on a set column when there is no request parameter, and set your defaultsort parameter to match that column. Or ensure that all links pointing to your page that houses the DisplayTag have a d-(encoded table id)-s=(column index or sortName) parameter in them.</p>
<p>To determine the request parameter name for column sorting you can do:</p>

<div class="source">
<div class="source"><pre class="prettyprint">   new ParamEncoder(tableId).encodeParameterName(TableTagParameters.PARAMETER_SORT))
</pre></div></div>

<p>To get the order (ASC/DESC):</p>

<div class="source">
<div class="source"><pre class="prettyprint">   new ParamEncoder(tableId).encodeParameterName(TableTagParameters.PARAMETER_ORDER))
</pre></div></div>

<p>Descending is 2, Ascending is 1.</p></section><section>
<h4><a name="External_Sorting_And_Paging_.28Partial_Lists.29"></a>External Sorting And Paging (Partial Lists)</h4>

<div class="source">
<div class="source"><pre class="prettyprint">&lt;display:table name=&quot;testList&quot; sort=&quot;external&quot; defaultsort=&quot;1&quot; pagesize=&quot;20&quot; id=&quot;element&quot; partialList=&quot;true&quot; size=&quot;resultSize&quot;&gt;
  &lt;display:column property=&quot;id&quot; title=&quot;ID&quot; sortable=&quot;true&quot; sortName=&quot;id&quot; /&gt;
  &lt;display:column property=&quot;firstName&quot; sortable=&quot;true&quot; sortName=&quot;firstName&quot; title=&quot;First Name&quot; /&gt;
  &lt;display:column property=&quot;lastName&quot; sortable=&quot;true&quot; sortName=&quot;lastName&quot; title=&quot;Last Name&quot; /&gt;
  &lt;display:column property=&quot;address&quot; sortable=&quot;true&quot; sortName=&quot;address&quot; title=&quot;Email Address&quot;/&gt;
&lt;/display:table&gt;
</pre></div></div>

<p>All of the above information for external sorting applies to partial lists. Additionally there are two new properties on the table tag: partialList and size. To enable partial lists simply set partialList=&#x201c;true&#x201d; on the table tag. Next you must tell Display Tag the total size of your list since you are only making a specific subset of it available to the tag. You do this by storing the total list size in a java.lang.Integer object and putting it into some scope available to DisplayTag. Then you set size=(name the Integer was stored under) on the table tag. Very easy. It is also important that you specify a pagesize on the table tag. It is also a good idea to set your backend to load a default amount of your list when there are no request parameters, probably the first page worth of data.</p>
<p>To determine the starting record you need to return based on the request parameters provided via Display Tag you can do:</p>

<div class="source">
<div class="source"><pre class="prettyprint">   (Integer.parseInt(request.getParameter((new ParamEncoder(tableId).encodeParameterName(TableTagParameters.PARAMETER_PAGE)))) - 1) * pageSize.
</pre></div></div>

<p>To get the ending record just add pageSize to the above value.</p></section></section></section>
        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>&#169;      2002&#x2013;2021
<a href="http://sourceforge.net/projects/displaytag">the Displaytag team</a>
        <li id="publishDate" class="pull-right">Last Published: 07-09-2021 05:35</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 2.4.2</li>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
